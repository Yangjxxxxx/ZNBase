<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="685px" preserveAspectRatio="none" style="width:1387px;height:685px;" version="1.1" viewBox="0 0 1387 685" width="1387px" zoomAndPan="magnify"><defs><filter height="300%" id="flqw8dnmj50pn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="518.4766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="279" y="108.6953"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="445.0781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="533" y="152.9609"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="371.6797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787" y="197.2266"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="238.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="792" y="249.4922"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="189.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1046" y="298.7578"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="485.4766" style="stroke: #000000; stroke-width: 2.0;" width="1362" x="13" y="55.2969"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="146.4688" style="stroke: #000000; stroke-width: 2.0;" width="374.5" x="990.5" y="313.7578"/><rect fill="#FFFFFF" height="72.0703" style="stroke: none; stroke-width: 1.0;" width="374.5" x="990.5" y="388.1563"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="1362" x="13" y="496.3594"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="1362" x="13" y="511.1641"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="1362" x="13" y="525.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="49" x2="49" y1="38.2969" y2="645.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="283.5" x2="283.5" y1="38.2969" y2="645.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="537.5" x2="537.5" y1="38.2969" y2="645.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="792" x2="792" y1="38.2969" y2="645.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1050.5" x2="1050.5" y1="38.2969" y2="645.1719"/><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="30" y="22.9951">Build</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="23" y="644.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="30" y="664.167">Build</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="204.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="211.5" y="22.9951">optbuilder/values.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="204.5" y="644.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="211.5" y="664.167">optbuilder/values.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="496.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="503.5" y="22.9951">scope.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="496.5" y="644.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="503.5" y="664.167">scope.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="716" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="723" y="22.9951">tree/type_check.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="716" y="644.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="723" y="664.167">tree/type_check.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1000.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1007.5" y="22.9951">constant.go</text><rect fill="#FEFECE" filter="url(#flqw8dnmj50pn)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1000.5" y="644.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1007.5" y="664.167">constant.go</text><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="518.4766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="279" y="108.6953"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="445.0781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="533" y="152.9609"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="371.6797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="787" y="197.2266"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="238.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="792" y="249.4922"/><rect fill="#FFFFFF" filter="url(#flqw8dnmj50pn)" height="189.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1046" y="298.7578"/><path d="M13,55.2969 L77,55.2969 L77,62.2969 L67,72.2969 L13,72.2969 L13,55.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="485.4766" style="stroke: #000000; stroke-width: 2.0;" width="1362" x="13" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="68.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="92" y="67.5073">[stmt.Select.(type) == ValuesClause]</text><polygon fill="#A80036" points="267,104.6953,277,108.6953,267,112.6953,271,108.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="49" x2="273" y1="108.6953" y2="108.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="56" y="88.4966">buildValuesClause()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="60" y="103.6294">param: selectStmt, desired type</text><polygon fill="#A80036" points="521,148.9609,531,152.9609,521,156.9609,525,152.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="289" x2="527" y1="152.9609" y2="152.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="296" y="132.7622">inScope.resolveType()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="300" y="147.895">param: untyped expr, desired type</text><polygon fill="#A80036" points="775,193.2266,785,197.2266,775,201.2266,779,197.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="781" y1="197.2266" y2="197.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="550" y="177.0278">TypeCheck()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="554" y="192.1606">param: untyped expr, desired type</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="797" x2="844" y1="236.4922" y2="236.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="844" x2="844" y1="236.4922" y2="249.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="803" x2="844" y1="249.4922" y2="249.4922"/><polygon fill="#A80036" points="813,245.4922,803,249.4922,813,253.4922,809,249.4922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="809" y="216.2935">(expr *Expr)TypeCheck()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="813" y="231.4263">param: desired type</text><polygon fill="#A80036" points="1034,294.7578,1044,298.7578,1034,302.7578,1038,298.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="802" x2="1040" y1="298.7578" y2="298.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="809" y="278.5591">typeCheckConstant()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="813" y="293.6919">param: untyped expr, desired type</text><path d="M990.5,313.7578 L1054.5,313.7578 L1054.5,320.7578 L1044.5,330.7578 L990.5,330.7578 L990.5,313.7578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="146.4688" style="stroke: #000000; stroke-width: 2.0;" width="374.5" x="990.5" y="313.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1005.5" y="326.8247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="1069.5" y="325.9683">[desired type in range availableTypes]</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1056" x2="1098" y1="367.1563" y2="367.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1098" x2="1098" y1="367.1563" y2="380.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1057" x2="1098" y1="380.1563" y2="380.1563"/><polygon fill="#A80036" points="1067,376.1563,1057,380.1563,1067,384.1563,1063,380.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1063" y="346.9575">constant.RecolveAsType()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1067" y="362.0903">param: desired type</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="990.5" x2="1365" y1="389.1563" y2="389.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="273" x="995.5" y="399.3667">[desired type not in range availableTypes]</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1056" x2="1098" y1="439.2266" y2="439.2266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1098" x2="1098" y1="439.2266" y2="452.2266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1057" x2="1098" y1="452.2266" y2="452.2266"/><polygon fill="#A80036" points="1067,448.2266,1057,452.2266,1067,456.2266,1063,452.2266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1063" y="419.0278">constant.RecolveAsType()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="1067" y="434.1606">param: desired type(desiredType := avail[0])</text><polygon fill="#A80036" points="808,484.3594,798,488.3594,808,492.3594,804,488.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="802" x2="1050" y1="488.3594" y2="488.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="814" y="483.2935">typed expr</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1375" y1="497.3594" y2="497.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="18" y="507.5698">[stmt.Select.(type) == UnionClause]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1375" y1="512.1641" y2="512.1641"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="18" y="522.3745">[stmt.Select.(type) == SelectClause]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1375" y1="526.9688" y2="526.9688"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="18" y="537.1792">[panic !!!]</text><polygon fill="#A80036" points="554,564.9063,544,568.9063,554,572.9063,550,568.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="548" x2="791" y1="568.9063" y2="568.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="560" y="563.8403">typed expr</text><polygon fill="#A80036" points="300,594.0391,290,598.0391,300,602.0391,296,598.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="294" x2="537" y1="598.0391" y2="598.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="306" y="592.9731">typed expr</text><polygon fill="#A80036" points="60,623.1719,50,627.1719,60,631.1719,56,627.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="54" x2="283" y1="627.1719" y2="627.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="66" y="622.106">typed expr</text><!--MD5=[9b7bb32efed780176648b70cd0647a32]
@startuml
alt stmt.Select.(type) == ValuesClause
    Build -> "optbuilder/values.go" ++: buildValuesClause() \n param: selectStmt, desired type
    "optbuilder/values.go" -> scope.go ++: inScope.resolveType() \n param: untyped expr, desired type
    scope.go -> "tree/type_check.go" ++: TypeCheck() \n param: untyped expr, desired type
    "tree/type_check.go" - -> "tree/type_check.go" ++: (expr *Expr)TypeCheck() \n param: desired type
    "tree/type_check.go" -> constant.go ++: typeCheckConstant() \n param: untyped expr, desired type
    alt desired type in range availableTypes
        constant.go - -> constant.go : constant.RecolveAsType() \n param: desired type
    else desired type not in range availableTypes
        constant.go - -> constant.go : constant.RecolveAsType() \n param: desired type(desiredType := avail[0])
    end
    return typed expr
    deactivate "tree/type_check.go"
else stmt.Select.(type) == UnionClause

else stmt.Select.(type) == SelectClause

else panic !!!
    
end
return typed expr
return typed expr
return typed expr
@enduml

PlantUML version 1.2019.12beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>